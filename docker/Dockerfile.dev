FROM node:gallium-alpine

ARG WEBSERVER_DIR=${WEBSERVER_DIR}
WORKDIR /usr/local/apps/${WEBSERVER_DIR}

# override base log level of info
# ENV NPM_CONFIG_LOGLEVEL warn

# RUN apk add git
# copy all except when listed in .dockerignore
COPY . .

RUN yarn install

# https://medium.com/@kartikio/setup-node-ts-local-development-environment-with-docker-and-hot-reloading-922db9016119
# ENV PATH=/usr/local/apps/${WEBSERVER_DIR}/node_modules/.bin:$PATH

EXPOSE ${PORT}

CMD ["yarn", "run", "start"]
